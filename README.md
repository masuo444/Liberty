# 🌍 Liberty (リバティ)

> 自分の会社やブランドの知識をAIに教えて、誰でも"話せる"ようにするアプリ。

## 🎯 Libertyとは？

FOMUSが開発している「多言語AIウェブアプリ」で、企業・クリエイター・職人・教育機関などが、自分たちの情報をAIに覚えさせて、世界中の人と会話できる仕組みを作れます。

### 💬 たとえばこんな使い方

- **日本酒の酒蔵** → 外国人に「蔵の歴史」や「おすすめの飲み方」を多言語で紹介
- **工芸ブランド** → 職人の想いや製品の説明を、音声付きAIが案内
- **美術館や学校** → 展示や授業内容を、訪問者がAIと対話しながら学習

どんな業種でも、「自分たちの知識を入れれば、それを話してくれるAI」を作れるのがLibertyです。

## 🧠 仕組みのイメージ

```
[あなたの資料やホームページ]
        ↓
   「知識Box」に入れる
        ↓
  Liberty AI が内容を理解
        ↓
 世界のユーザーと多言語で対話
```

📚 PDFやURLを放り込むだけで、AIが自動的に学習します。AIは「知識Box」に入っている内容だけで答えるため、間違った情報を作らず、正確に説明できるのが特徴です。

## 🔊 主な機能

| 機能 | 内容 |
|------|------|
| 🗣️ チャット機能 | テキストで質問・回答ができる（常にON） |
| 🎤 音声入力（STT） | マイクで話しかけられる |
| 🔈 音声返信（TTS） | AIが自然な声で話してくれる（有料機能） |
| 🌐 多言語対応 | 世界の人が母国語で質問しても、自動で翻訳＆回答 |
| 📚 知識Box | AIが答えるための"資料箱"を自由に登録 |
| 🔒 承認キー（ライセンス） | FOMUSが発行する6桁キーで起動。支払い後に機能を解放 |
| 🪶 PWA（ウェブアプリ） | スマホやiPadでアプリのように使える |
| 🖥️ 展示モード | 展示会や店舗向けの1画面フルスクリーンUI（巨大ボタン＋動画） |

## 🧩 技術スタック

| 要素 | 使っている技術 | 役割 |
|------|---------------|------|
| AIエンジン | GPT-4o | 回答を生成 |
| 音声認識（STT） | ElevenLabs / Whisper | 声をテキストに変換 |
| 音声合成（TTS） | ElevenLabs | 回答を自然な声で再生 |
| ウェブアプリ | Next.js (PWA) | どの端末でも使える |
| 配布 | Vercel + GitHub | ワンクリックで公開できる |
| 承認システム | FOMUS API | 有料機能（音声）をロック管理 |

## 🧭 Libertyの目的

**「AIを使って文化を伝える。」**

FOMUSは、AIを"便利なツール"ではなく、文化や想いを世界に伝えるための通訳者として使います。

Libertyはそのための共通プラットフォームです。日本酒、工芸、教育、観光など──どんな分野の人でも"AIで世界とつながる"体験を自分たちの手で作れるようになります。

## 🏗️ 開発ステップ

| 段階 | 状況 | 内容 |
|------|------|------|
| STEP 1 | ✅ 進行中 | 録音 → AI回答 → 音声再生までを実装（PWAで動作） |
| STEP 2 | 🔜 次 | 知識Box（RAG）を本格化して資料ベースの回答にする |
| STEP 3 | 🔜 次 | 支払い後に音声機能をONにできる「承認キー」機能 |
| STEP 4 | 🧭 予定 | 展示会モード（1画面UI＋QR＋動画） |
| STEP 5 | 🧱 予定 | Electronアプリ化（TV・PC常設用） |

---

## 💼 FOMUSの役割

- Libertyの基盤開発（AI・音声・UI・配布システム）
- 企業や個人に6桁キーを発行し、支払い後に機能を解放
- アップデート配信・技術サポート
- 将来的には「Liberty for Sake」「Liberty for Craft」など各業界パッケージ展開

## 🔒 ビジネス構造

| 項目 | 内容 |
|------|------|
| 利用無料部分 | チャット・音声入力 |
| 有料アンロック | 音声返信（TTS） |
| 販売方式 | FOMUSがキーを発行（支払い後にロック解除） |
| 配布形態 | PWA / Electron（同じコードベース） |
| 導入費 | 初期¥300,000〜、保守¥50,000/年（予定） |

## ✨ 将来的なビジョン

- 世界中の文化・ブランドが、Libertyの上で「自分の声を持つ」
- 各地の展示会で、iPadやTVを通してAIが自動案内
- FOMUSは文化とAIの"翻訳者"として世界展開

---

## 📖 技術ドキュメント

### 実装済み機能

- **ライセンスゲート**: 6 桁キーで機能アンロック。サンプルとして `LIB-123456`（TTS 無効）と `LIB-654321`（TTS 有効）を同梱
- **多言語チャット UI**: 自動言語判定（ブラウザの `navigator.language`）とストリーミング表示。資料出典を付与する想定のモック実装付き
- **動画×チャット 2 カラム**: 企業 PV とチャットを同一画面で提示。展示利用を想定したダークトーンの UI
- **音声制御トグル**: STT/TTS のライセンス状態を反映し、トグルで状態を切り替え
- **60 秒自動クリア**: 入力が無い場合にチャット履歴を初期化
- **PWA 対応準備**: `manifest.json` と `next-pwa` 設定を追加済み。Vercel へそのままデプロイ可能

## 開発を始める

```bash
npm install
npm run dev
```

`http://localhost:3000` にアクセスしてライセンスキーを入力してください。

## 環境変数

`.env.example` を参考に `.env.local` を作成し、以下を設定します。

- `OPENAI_API_KEY`: GPT-4o / File Search などに利用。
- `ELEVENLABS_API_KEY`: 音声合成（TTS）に利用。
- `SUPABASE_URL` / `SUPABASE_ANON_KEY`: 会話ログやドキュメント管理を行う場合に利用。
- `LICENSE_API_BASE`: 別管理のライセンス API に接続する場合に利用。

現在はスタブ API を使用しているため未設定でも動作します。

## API ルート構成

- `POST /api/license/verify`: ライセンスキーを検証し、利用可能な機能を返す。現在はモック実装。
- `POST /api/chat/stream`: チャット補完のストリーミング応答。OpenAI File Search + GPT-4o 連携を想定したスタブ。
- `POST /api/voice/stt`: 音声入力をテキスト化。Whisper または ElevenLabs API にフォワードする想定。
- `POST /api/voice/tts`: テキストを音声化。現在はサイレント MP3 を返すダミー。
- `POST /api/knowledge/ingest`: PDF/URL/テキストを受け取り、RAG の知識ベースに登録する想定。

## 次のステップ

1. 実 API と接続：`app/api` 以下のスタブを、FOMUS 管理サーバーや Supabase Edge Functions に置き換える。
2. RAG 実装：OpenAI File Search や pgvector を組み合わせ、`/api/chat/stream` で引用付き応答を返す。
3. 音声 I/O：`requestTranscription` / `requestSpeech` を EleventLabs / Whisper API に接続し、チャット応答の再生まで自動化。
4. Electron ラッパー：展示会向けにキオスクモードで動く Electron ランチャーを整備。

## ライセンス

MIT License
